{% if error %}
<div class="p-4 bg-red-900/20 border border-red-700/50 rounded-xl text-red-300 text-sm">
    âš ï¸ {{ error }}
</div>
{% elif tenant %}
<form id="settingsForm" class="space-y-6">
    <input type="hidden" name="tenant_api_key" value="{{ tenant.api_key }}" />
    
    {% if success %}
    <div class="p-4 bg-green-900/20 border border-green-700/50 rounded-xl text-green-300 text-sm">
        âœ… {{ success }}
    </div>
    {% endif %}

    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ -->
    <div class="p-4 bg-slate-800/50 rounded-xl border border-slate-700">
        <h3 class="font-semibold text-slate-200 mb-3">ğŸ“Š Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</h3>
        <div class="grid gap-3">
            <div class="flex justify-between items-center">
                <span class="text-slate-400">Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</span>
                <span class="text-slate-200 font-medium">{{ tenant.name }}</span>
            </div>
            <div class="flex justify-between items-center">
                <span class="text-slate-400">API Key</span>
                <code class="text-xs bg-slate-900 px-2 py-1 rounded text-cyan-400">{{ tenant.api_key[:20] }}...</code>
            </div>
            <div class="flex justify-between items-center">
                <span class="text-slate-400">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</span>
                <span class="text-slate-300 text-sm">{{ tenant.created_at.strftime('%Y-%m-%d') if tenant.created_at else '-' }}</span>
            </div>
        </div>
    </div>

    <!-- System Prompt -->
    <div>
        <label class="label">ğŸ§  System Prompt (Ø´Ø®ØµÙŠØ© Ø§Ù„Ø¨ÙˆØª)</label>
        <textarea name="system_prompt" rows="6" class="input-field" placeholder="Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ ÙˆØ¯ÙˆØ¯. ØªØ¬ÙŠØ¨ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø´ÙƒÙ„ Ù…Ø®ØªØµØ± ÙˆÙ…ÙÙŠØ¯...">{{ tenant.system_prompt or '' }}</textarea>
        <p class="text-xs text-slate-500 mt-1">ÙŠØ­Ø¯Ø¯ ÙƒÙŠÙ ÙŠØªØµØ±Ù Ø§Ù„Ø¨ÙˆØª ÙˆÙŠØªØ­Ø¯Ø« Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</p>
    </div>

    <!-- Webhook URL -->
    <div>
        <label class="label">ğŸ”— Webhook URL (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
        <input type="url" name="webhook_url" value="{{ tenant.webhook_url or '' }}" placeholder="https://your-server.com/webhook" class="input-field" />
        <p class="text-xs text-slate-500 mt-1">Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù„Ù†Ø¸Ø§Ù… Ø®Ø§Ø±Ø¬ÙŠ Ø¹Ù†Ø¯ ÙƒÙ„ Ø±Ø³Ø§Ù„Ø©</p>
    </div>

    <button type="submit" class="btn-primary w-full">
        ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    </button>
</form>

<script>
document.getElementById('settingsForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    
    try {
        const response = await fetch('/ui/settings/update', {
            method: 'POST',
            body: formData
        });
        
        if (response.ok) {
            const html = await response.text();
            document.getElementById('settings-form').innerHTML = html;
            showToast('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ âœ“');
        }
    } catch (error) {
        showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸', 'error');
    }
});
</script>
{% else %}
<div class="text-center py-8 text-slate-400">
    <div class="text-4xl mb-3">âš™ï¸</div>
    <p>Ø§Ø®ØªØ± Ù…Ø´Ø±ÙˆØ¹Ø§Ù‹ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</p>
</div>
{% endif %}
