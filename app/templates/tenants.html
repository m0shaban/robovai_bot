{% extends "base.html" %}
{% block content %}
<!-- Quick Start Guide -->
{% if tenants|length == 0 %}
<div class="bg-gradient-to-r from-cyan-900/30 to-indigo-900/30 border border-cyan-700/50 rounded-xl p-6 mb-6">
  <div class="flex items-start space-x-4">
    <div class="text-4xl">ğŸš€</div>
    <div>
      <h3 class="text-lg font-semibold text-slate-50 mb-2">Welcome to RoboVAI!</h3>
      <p class="text-sm text-slate-300 mb-3">Start by creating your first tenant. Each tenant represents a separate chatbot instance with its own settings and data.</p>
      <ol class="text-sm text-slate-400 space-y-1 list-decimal list-inside">
        <li>Create a tenant below (admin password required if set)</li>
        <li>Copy the generated API key</li>
        <li>Configure channels, rules, and quick replies</li>
        <li>Integrate with Telegram, WhatsApp, or Meta</li>
      </ol>
    </div>
  </div>
</div>
{% endif %}

<div class="grid md:grid-cols-3 gap-4 mb-6">
  <div class="card p-4 rounded-xl md:col-span-2">
    <div class="flex items-center justify-between mb-3">
      <div>
        <div class="text-sm text-slate-400">Tenants</div>
        <div class="text-xl font-semibold text-slate-50">All tenants ({{ tenants|length }})</div>
      </div>
      <button class="px-3 py-2 text-xs rounded-lg bg-slate-800 text-slate-200 border border-slate-700"
              hx-get="/ui/tenants/rows" hx-target="#tenant-rows" hx-swap="outerHTML">
        Refresh
      </button>
    </div>
    <div id="tenant-rows">
      {% include "_tenant_rows.html" %}
    </div>
  </div>

  <div class="card p-4 rounded-xl space-y-3">
    <div>
      <div class="text-sm text-slate-400">Admin password</div>
      <input id="admin_password" name="admin_password" type="password" placeholder="Required for write ops"
             class="w-full mt-1 px-3 py-2 rounded-lg bg-slate-900 border border-slate-700 text-slate-100 text-sm" />
      {% if admin_protected %}
        <p class="text-xs text-amber-400 mt-1">ADMIN_PASSWORD Ù…Ø·Ù„ÙˆØ¨ Ù„Ù„Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙˆØ§Ù„Ø­Ø°Ù.</p>
      {% else %}
        <p class="text-xs text-emerald-400 mt-1">ADMIN_PASSWORD ØºÙŠØ± Ù…ÙØ¹Ù‘Ù„ (ØªØµØ±Ù‘Ù Ø¨Ø­Ø°Ø± ÙÙŠ Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬).</p>
      {% endif %}
    </div>

    <form hx-post="/ui/tenants" hx-target="#tenant-rows" hx-swap="outerHTML" hx-include="#admin_password"
          class="space-y-2">
      <div>
        <label class="text-sm text-slate-300">Name</label>
        <input name="name" required placeholder="Tenant name"
               class="w-full mt-1 px-3 py-2 rounded-lg bg-slate-900 border border-slate-700 text-slate-100 text-sm" />
      </div>
      <div>
        <label class="text-sm text-slate-300">System Prompt</label>
        <textarea name="system_prompt" rows="2" placeholder="Optional system prompt"
                  class="w-full mt-1 px-3 py-2 rounded-lg bg-slate-900 border border-slate-700 text-slate-100 text-sm"></textarea>
      </div>
      <div>
        <label class="text-sm text-slate-300">Webhook URL</label>
        <input name="webhook_url" placeholder="https://..."
               class="w-full mt-1 px-3 py-2 rounded-lg bg-slate-900 border border-slate-700 text-slate-100 text-sm" />
      </div>
      <button type="submit"
              class="w-full mt-2 px-3 py-2 rounded-lg bg-gradient-to-r from-cyan-500 to-indigo-500 text-sm font-semibold text-white">
        + Add Tenant
      </button>
    </form>

    <div class="text-xs text-slate-400 border-t border-slate-800 pt-3">
      <strong class="text-slate-300">ğŸ’¡ Tips:</strong><br>
      â€¢ Operations happen instantly via HTMX (no page reload)<br>
      â€¢ API keys are shown for integration - save them securely<br>
      â€¢ Set ADMIN_PASSWORD in production for security<br>
      â€¢ Each tenant has isolated data and settings
    </div>
  </div>
</div>
{% endblock %}
