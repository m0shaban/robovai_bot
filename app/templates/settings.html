{% extends "base.html" %} {% block title %}ุงูุฅุนุฏุงุฏุงุช - RoboVAI{% endblock %} {%
block content %}
<div class="space-y-6 fade-in">
  <!-- Header -->
  <div class="flex items-center justify-between">
    <div>
      <h1
        class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-indigo-400"
      >
        โ๏ธ ุงูุฅุนุฏุงุฏุงุช
      </h1>
      <p class="text-slate-400 mt-1">ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน ูุงูุฐูุงุก ุงูุงุตุทูุงุนู</p>
    </div>
  </div>

  <!-- Tenant Selector -->
  <div class="glass-card p-6">
    <label class="label text-lg">๐ข ุงุฎุชุฑ ุงููุดุฑูุน</label>
    <select
      id="tenant_select"
      class="select-field text-lg"
      onchange="loadAllSettings()"
    >
      <option value="">-- ุงุฎุชุฑ ูุดุฑูุนุงู ูุนุฑุถ ุงูุฅุนุฏุงุฏุงุช --</option>
      {% for tenant in tenants %}
      <option value="{{ tenant.api_key }}" data-id="{{ tenant.id }}">
        {{ tenant.name }}
      </option>
      {% endfor %}
    </select>
  </div>

  <div id="settings-content">
    <!-- Placeholder when no tenant selected -->
    <div class="grid lg:grid-cols-2 gap-6">
      <div class="glass-card p-8 text-center">
        <div class="text-6xl mb-4">๐ค</div>
        <h3 class="text-xl font-semibold text-slate-200 mb-2">
          ุฅุนุฏุงุฏุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู
        </h3>
        <p class="text-slate-400">ุงุฎุชุฑ ูุดุฑูุนุงู ูุชูููู ุงูุฐูุงุก ุงูุงุตุทูุงุนู</p>
      </div>
      <div class="glass-card p-8 text-center">
        <div class="text-6xl mb-4">๐</div>
        <h3 class="text-xl font-semibold text-slate-200 mb-2">
          Webhooks & API
        </h3>
        <p class="text-slate-400">ุงุฎุชุฑ ูุดุฑูุนุงู ูุนุฑุถ ุฑูุงุจุท ุงูู API</p>
      </div>
    </div>
  </div>
</div>

<!-- AI Settings Info Card -->
<div
  class="fixed bottom-4 left-4 max-w-sm glass-card p-4 border-cyan-500/50 border z-40"
  id="ai-help-card"
>
  <div class="flex items-start gap-3">
    <div class="text-2xl">๐ก</div>
    <div>
      <h4 class="font-semibold text-slate-200 mb-1">ุฅุนุฏุงุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู</h4>
      <p class="text-xs text-slate-400 mb-2">
        ููุญุตูู ุนูู ููุชุงุญ API ูุฌุงูู ูู Groq:
      </p>
      <ol class="text-xs text-slate-400 space-y-1 list-decimal list-inside">
        <li>
          ุงุฐูุจ ุฅูู
          <a
            href="https://console.groq.com"
            target="_blank"
            class="text-cyan-400 hover:underline"
            >console.groq.com</a
          >
        </li>
        <li>ุณุฌูู ุญุณุงุจ ูุฌุงูู</li>
        <li>ุงูุณุฎ API Key ูู Dashboard</li>
      </ol>
      <button
        onclick="this.parentElement.parentElement.parentElement.remove()"
        class="mt-2 text-xs text-slate-500 hover:text-slate-300"
      >
        ุฅุฎูุงุก โ
      </button>
    </div>
  </div>
</div>

<script>
  const BASE_URL = '{{ base_url }}';

  function loadAllSettings() {
    const select = document.getElementById('tenant_select');
    const apiKey = select.value;
    const tenantId = select.options[select.selectedIndex]?.dataset?.id;

    if (!apiKey) {
      document.getElementById('settings-content').innerHTML = `
            <div class="grid lg:grid-cols-2 gap-6">
                <div class="glass-card p-8 text-center">
                    <div class="text-6xl mb-4">๐ค</div>
                    <h3 class="text-xl font-semibold text-slate-200 mb-2">ุฅุนุฏุงุฏุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู</h3>
                    <p class="text-slate-400">ุงุฎุชุฑ ูุดุฑูุนุงู ูุชูููู ุงูุฐูุงุก ุงูุงุตุทูุงุนู</p>
                </div>
                <div class="glass-card p-8 text-center">
                    <div class="text-6xl mb-4">๐</div>
                    <h3 class="text-xl font-semibold text-slate-200 mb-2">Webhooks & API</h3>
                    <p class="text-slate-400">ุงุฎุชุฑ ูุดุฑูุนุงู ูุนุฑุถ ุฑูุงุจุท ุงูู API</p>
                </div>
            </div>
        `;
      return;
    }

    htmx.ajax(
      'GET',
      '/ui/settings/full?tenant_api_key=' + encodeURIComponent(apiKey),
      { target: '#settings-content' }
    );
  }

  function copyToClipboard(text, btn) {
    navigator.clipboard.writeText(text).then(() => {
      const originalText = btn.innerHTML;
      btn.innerHTML = 'โ ุชู ุงููุณุฎ!';
      btn.classList.add('bg-green-600');
      setTimeout(() => {
        btn.innerHTML = originalText;
        btn.classList.remove('bg-green-600');
      }, 2000);
    });
  }

  function showToast(message, type = 'success') {
    const toast = document.createElement('div');
    toast.className = `fixed bottom-4 right-4 px-6 py-3 rounded-xl shadow-lg slide-in z-50 ${
      type === 'error' ? 'bg-red-600' : 'bg-green-600'
    } text-white`;
    toast.innerHTML = message;
    document.body.appendChild(toast);
    setTimeout(() => toast.remove(), 3000);
  }
</script>
{% endblock %}
